<% if notice %>
  <div class="alert alert-primary" role="alert">
    <aside id="notice"><%= notice %></aside>
  </div>
<% end %>

<h1>Cart</h1>

<% if @records %>
  <form action="/carts" method="post">
    <input type="hidden" name="cart_id" value="<%= @line_items.first().cart_id %>">
<table class="container">
  <thead>
  <tr>
    <th></th>
    <th></th>
    <th></th>
    <th></th>
    <th></th>
  </tr>
  </thead>

  <tbody>
  <% @records.each do |line_item| %>
    <tr style="border-bottom: 1px solid black;">
      <td><%= image_tag(line_item.food.photo, height:  '100', width: '100') %></td>
      <td><%= line_item.food.title %></td>
      <td><%= number_to_currency(line_item.price) %></td>
      <td>
        <select name="line-item_<%= line_item.id %>">
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
        </select>
      </td>
      <td><%= line_item.quantity %></td>
      <td>
      <%= button_to 'Delete product', delete_line_item_path(line_item_id: line_item.id), :class => 'btn btn-primary' %>
      </td>
    </tr>
  <% end %>
  </tbody>
</table>
<div style="text-align: center;">
  Subtotal: <%= number_to_currency(Current.sub_total) %>
</div>
<%== pagy_bootstrap_nav(@pagy) %>
<br>

<div style="display: inline-block">
  <% if @line_items.length > 0 %>
    <button type="submit" class="btn btn-primary">Checkout</button>
  <% end %>
</div>

<div style="display: inline-block">
  <%= link_to 'Continue shopping', store_index_path, :class => 'btn btn-secondary' %>
</div>

  </form>
<% else %>
  Cart is empty!!
  </br>
  <div style="display: inline-block">
    <%= link_to 'Continue shopping', store_index_path, :class => 'btn btn-secondary' %>
  </div>
<% end %>